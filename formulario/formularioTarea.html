<html lang="">

<head>
    <meta charset="utf-8">
    <title>Formulario</title>
    <style>
        .tabla{
           margin: auto;
            background-color: #F38A74;
        }
        .formulario{
            text-align: center;
        }
        body{
            background-color: #F8AA99;
        }
    </style>
</head>

<body>
    <h1 class="formulario">Formulario</h1>
    <table class="tabla">
        <form onsubmit="return comprobar();" method="post" action="formulario.php" name="registro">
            <tr>
                <th><label for="nombre">Nombre:</label></th>
                <th><input type="text" name="nombre" id="nombre" /></th>
            </tr>
            <tr>
                <th><label for="NIF">NIF:</label></th>
                <th><input type="text" id="NIF" /></th>
            </tr>
            <tr>
                <th><label for="email">Email:</label></th>
                <th><input type="email" id="email" /></th>
            </tr>
            <tr>
                <th><label for="pais">País:</label></th>
                <th><input type="text" id="pais" /></th>
            </tr>
            <tr>
                <th colspan="2">
                    <a href="javascript:enviarForm()">Enviar</a>
                </th>
            </tr>
        </form>
    </table>
    <script>
        function enviarForm() {
            if (comprobar == 0) {
                document.registro.submit();
            } else {
                alert("Algo ha fallado");
            }
        }

        function comprobar() {
            var correcto = 0;
            if (comprobarNif() == true) {
                alert("NIF correcto");
            } else {
                correcto = 1;
                alert("NIF incorrecto");
            }
            if (comprobarEmail() == true) {
                alert("correo correcto");
            } else {
                correcto = 1;
                alert("coreo invalido");
            }
            if (comprobarPais() == true) {
                alert("pais correcto");
            } else {
                correcto = 1;
                alert("Solo se permite España o Italia");
            }
            if (correcto == 0) {
                return 0;
            } else {
                return 1;
            }
        } //funcion comprobar


        function comprobarEmail() {
            var correcto = false;
            var email = document.getElementById("email").value;
            caracteresValidos = /^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i;
            if (email.split("@")[1] == "hotmail.com" || email.split("@")[1] == "yahoo.es" || email.length == 0) {
                correcto = false;
                return correcto;
            } else {
                correcto = true;
                return correcto;
            }
            /*if (email.length == 0) {
                correcto = false;
                return correcto;
            }*/
        }

        function comprobarPais() {
            var correcto = false;
            var pais = document.getElementById("pais").value;
            //document.log(pais);
            if (pais == "España" || pais == "Italia") {
                correcto = true;
                return correcto;
            } else {
                correcto = false;
                return correcto;
            }
            if (pais.length == 0) {
                return correcto;
            }
        }

        function comprobarNif() {
            var correcto = false;
            var dni = document.getElementById("NIF").value;
            if (!(/^\d{8}[^XMI]$/.test(dni))) {
                correcto = false;
                return correcto;
            } else {
                correcto = true;
                return correcto;
            }
        }

    </script>
</body>

</html>
